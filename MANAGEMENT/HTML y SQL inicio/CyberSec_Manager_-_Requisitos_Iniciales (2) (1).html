<html>
<head>
  <meta charset="utf-8">
  <title>Proyecto en Grupo - Requisitos Iniciales</title>
</head>
<body class="papel" style="background-color:#F0F0C0;">
<div class="bloque" style="font-family:arial;font-size:1.25em;text-align:justify;border:1.5mm solid #508050;margin:0.25em;padding:1em;">

<div class="titulo titulo0" style="margin:5mm;font-size:2.0em;font-weight:bold;color:#4040F0">CyberSec Manager</div>
<div class="titulo titulo1" style="margin:5mm;font-size:2.0em;font-weight:bold">Proyecto en Grupo</div>
<div class="titulo titulo2" style="margin:5mm;font-size:1.5em;font-weight:bold">Requisitos Iniciales.</div>

<hr/>
<div class="titulo titulo3" style="margin:5mm;font-size:1.0em;font-weight:bold">Requisitos de Información / Datos:</div>
<div style="text-align:justify;margin:0em">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*** Información y Datos que debe almacenar y manejar el sistema para proporcionar las funcionalidades indicadas en los requisitos.

<ul>
  <li><strong>Usuario: </strong>
  Elemento con &rarr; email, password (hash), nombre, apellidos, 
  Rol, 
  empresa (solo para clientes), 
  telefono (opcional), 
  direccion (opcional),
  fecha_registro, 
  ultimo_acceso,
  intentos_acceso,
  bloqueado, fecha_bloqueo, motivo_bloqueo,
  activo.
  <br/>
  *** El sistema almacena todos los usuarios: visitantes, clientes y personal interno de la empresa.
  <br/>
  *** El perfil de un usuario y los permisos de acceso se deberán gestionar aplicando el sistema RBAC de control de acceso basado en roles. Para ello se deberá aprovechar el sistema integrado en el framework de trabajo (Yii2).
  <br/>
  *** Los roles definidos son: <strong>invitado</strong> (visitante del catálogo público), <strong>cliente</strong> (contrata servicios y accede a su área privada), <strong>consultor</strong> (gestiona proyectos de implantación de normativas), <strong>auditor</strong> (realiza auditorías y gestiona el calendario), <strong>analista_soc</strong> (gestiona incidencias de seguridad), y <strong>admin</strong> (administrador del sistema).
  </li>
  <br/>
  
  <li><strong>Rol:</strong>
  Sustituto de &rarr; rol (ENUM). Valor predefinido del conjunto: 'invitado', 'cliente', 'consultor', 'auditor', 'analista_soc', 'admin'.
  <br/>
  *** El rol es un atributo directo de Usuario (campo ENUM en la base de datos), no una tabla separada.
  <br/>
  *** Esto simplifica el diseño manteniendo la funcionalidad completa de RBAC que Yii2 proporciona.
  </li>
  <br/>

  <li><strong>Servicio: </strong>
  Elemento con &rarr; nombre, descripcion, 
  Categoria,
  precio_base (opcional),
  duracion_estimada (en días, opcional),
  requiere_auditoria (lógico),
  activo,
  Registro de usuario.
  <br/>
  *** Catálogo de servicios de ciberseguridad que la empresa ofrece a sus clientes.
  <br/>
  *** Ejemplos: "Implantación ISO 27001", "Auditoría ENS", "Servicio SOC 24/7", "Pentesting Web".
  </li>
  <br/>
  
  <li><strong>Categoría:</strong>
  Sustituto de &rarr; categoria (ENUM). Valor del conjunto: 'Gobernanza', 'Defensa', 'Auditoría'.
  <br/>
  *** <strong>Gobernanza:</strong> Implantación de normativas como ISO27001, ENS (Esquema Nacional de Seguridad), NIS2 (Directiva de Seguridad de Redes).
  <br/>
  *** <strong>Defensa:</strong> Servicios SOC (Security Operations Center), respuesta a incidentes, monitorización.
  <br/>
  *** <strong>Auditoría:</strong> Pentesting, auditorías de cumplimiento normativo, auditorías técnicas.
  </li>
  <br/>

  <li><strong>Proyecto: </strong>
  Elemento con &rarr; nombre, descripcion,
  Cliente (FK a Usuarios),
  Servicio contratado (FK a Servicios),
  Consultor asignado (FK a Usuarios, opcional),
  Auditor asignado (FK a Usuarios, opcional),
  fecha_inicio,
  fecha_fin_prevista,
  fecha_fin_real (opcional),
  Estado,
  presupuesto (opcional),
  notas_internas,
  Registro de usuario.
  <br/>
  *** Representa la contratación real de un servicio por parte de un cliente.
  <br/>
  *** Cada proyecto vincula un CLIENTE con un SERVICIO, y opcionalmente se le asigna un CONSULTOR (para proyectos de implantación) y/o un AUDITOR (para proyectos que requieren auditoría).
  <br/>
  *** Ejemplo: "Implantación ENS para Ayuntamiento de Zamora" - Cliente: usuario_id=15, Servicio: servicio_id=3, Consultor: usuario_id=8.
  </li>
  <br/>
  
  <li><strong>Estado:</strong>
  Sustituto de &rarr; estado (ENUM). Valor del conjunto: 'Planificación', 'En curso', 'En revisión', 'Finalizado', 'Cancelado', 'Suspendido'.
  <br/>
  *** <strong>Planificación:</strong> Proyecto nuevo, aún no iniciado.
  <br/>
  *** <strong>En curso:</strong> Actualmente en ejecución.
  <br/>
  *** <strong>En revisión:</strong> Esperando aprobación o revisión.
  <br/>
  *** <strong>Finalizado:</strong> Completado exitosamente.
  <br/>
  *** <strong>Cancelado:</strong> Cancelado antes de finalizar.
  <br/>
  *** <strong>Suspendido:</strong> Pausado temporalmente.
  </li>
  <br/>

  <li><strong>Documento: </strong>
  Elemento con &rarr; nombre_archivo, descripcion,
  ruta_archivo,
  Tipo de documento,
  Proyecto relacionado (FK a Proyectos),
  tamaño_bytes,
  version (opcional),
  visible_cliente (lógico - indica si el cliente puede descargarlo),
  hash_verificacion (SHA-256, opcional - para integridad del archivo),
  Subido por (FK a Usuarios),
  fecha_subida,
  fecha_modificacion (opcional),
  notas.
  <br/>
  *** Documentos entregables generados durante los proyectos: políticas de seguridad, procedimientos, informes de auditoría, certificados, etc.
  <br/>
  *** Los consultores suben documentación (políticas, procedimientos) para que los clientes puedan descargarla desde su área privada.
  <br/>
  *** Los auditores suben informes de resultados de auditorías.
  </li>
  <br/>
  
  <li><strong>Tipo de documento:</strong>
  Sustituto de &rarr; tipo_documento (ENUM). Valor del conjunto: 'Política', 'Procedimiento', 'Informe de Auditoría', 'Informe SOC', 'Plan de Acción', 'Certificado', 'Documentación Técnica', 'Otros'.
  <br/>
  *** Clasificación de los tipos de documentos que se generan en los proyectos.
  <br/>
  *** <strong>Política:</strong> Política de seguridad de la información.
  <br/>
  *** <strong>Procedimiento:</strong> Procedimiento operativo de seguridad.
  <br/>
  *** <strong>Informe de Auditoría:</strong> Resultado de una auditoría realizada.
  <br/>
  *** <strong>Informe SOC:</strong> Informe de análisis de incidente de seguridad.
  <br/>
  *** <strong>Plan de Acción:</strong> Plan de mejora o remediación.
  <br/>
  *** <strong>Certificado:</strong> Certificación oficial obtenida.
  </li>
  <br/>

  <li><strong>Evento_Calendario: </strong>
  Elemento con &rarr; titulo, descripcion,
  Proyecto relacionado (FK a Proyectos),
  Auditor responsable (FK a Usuarios),
  fecha,
  hora_inicio,
  hora_fin (opcional),
  Tipo de evento,
  ubicacion (opcional - puede ser virtual),
  recordatorio_enviado (lógico),
  Estado del evento,
  notas,
  Registro de usuario.
  <br/>
  *** Sistema de calendario para programar eventos relacionados con proyectos, principalmente auditorías.
  <br/>
  *** Los auditores tienen permisos de escritura para crear y modificar eventos. Los consultores y clientes tienen permisos de lectura para consultar fechas programadas.
  <br/>
  *** Se recomienda usar la extensión yii2-fullcalendar para mostrar las fechas visualmente en el frontend.
  </li>
  <br/>
  
  <li><strong>Tipo de evento:</strong>
  Sustituto de &rarr; tipo_evento (ENUM). Valor del conjunto: 'Auditoría Interna', 'Auditoría de Certificación', 'Auditoría de Seguimiento', 'Reunión Cliente', 'Revisión Documental', 'Entrega Resultados', 'Otros'.
  <br/>
  *** <strong>Auditoría Interna:</strong> Auditoría interna del sistema de gestión del cliente.
  <br/>
  *** <strong>Auditoría de Certificación:</strong> Auditoría oficial para obtener certificación (ej: ISO 27001).
  <br/>
  *** <strong>Auditoría de Seguimiento:</strong> Revisión periódica posterior a la certificación.
  <br/>
  *** <strong>Reunión Cliente:</strong> Reunión de coordinación o seguimiento con el cliente.
  <br/>
  *** <strong>Revisión Documental:</strong> Revisión de documentos sin presencia física.
  <br/>
  *** <strong>Entrega Resultados:</strong> Presentación de resultados de auditoría o proyecto.
  </li>
  <br/>
  
  <li><strong>Estado del evento:</strong>
  Sustituto de &rarr; estado_evento (ENUM). Valor del conjunto: 'Programado', 'Confirmado', 'En curso', 'Completado', 'Pospuesto', 'Cancelado'.
  <br/>
  *** Indica la fase actual del evento programado.
  </li>
  <br/>

  <li><strong>Incidencia: </strong>
  Elemento con &rarr; titulo, descripcion,
  Cliente reportante (FK a Usuarios),
  Analista SOC asignado (FK a Usuarios, opcional),
  Severidad,
  Estado de incidencia,
  categoria_incidencia (opcional - tipo de amenaza),
  fecha_reporte,
  fecha_asignacion (opcional),
  fecha_primera_respuesta (opcional),
  fecha_resolucion (opcional),
  tiempo_resolucion (calculado en minutos),
  sla_cumplido (lógico - opcional, si se cumplió el acuerdo de nivel de servicio),
  ip_origen (opcional - dirección IP desde donde se detectó),
  sistema_afectado (opcional - servidor o sistema comprometido),
  acciones_tomadas (texto descriptivo),
  notas_internas,
  visible_cliente (lógico).
  <br/>
  *** Sistema de ticketing SOC (Security Operations Center) para gestión de incidencias de seguridad.
  <br/>
  *** Los clientes reportan incidencias desde el "Buzón SOC" en su área privada (formulario urgente para reportar problemas de seguridad).
  <br/>
  *** Los analistas SOC reciben las alertas, las asignan, investigan y resuelven las incidencias.
  <br/>
  *** Se controlan tiempos de respuesta para cumplir con SLAs (Service Level Agreements) según la severidad.
  </li>
  <br/>
  
  <li><strong>Severidad:</strong>
  Sustituto de &rarr; severidad (ENUM). Valor del conjunto: 'Crítica', 'Alta', 'Media', 'Baja', 'Informativa'.
  <br/>
  *** Nivel de urgencia y prioridad de la incidencia de seguridad.
  <br/>
  *** <strong>Crítica:</strong> Requiere atención inmediata (tiempo de respuesta &lt; 15 minutos). Ej: Sistema comprometido activamente.
  <br/>
  *** <strong>Alta:</strong> Muy urgente (tiempo de respuesta &lt; 1 hora). Ej: Intento de intrusión detectado.
  <br/>
  *** <strong>Media:</strong> Urgente (tiempo de respuesta &lt; 4 horas). Ej: Comportamiento anómalo en la red.
  <br/>
  *** <strong>Baja:</strong> Normal (tiempo de respuesta &lt; 24 horas). Ej: Actualización de seguridad pendiente.
  <br/>
  *** <strong>Informativa:</strong> Solo informativo, sin acción urgente requerida.
  </li>
  <br/>
  
  <li><strong>Estado de incidencia:</strong>
  Sustituto de &rarr; estado_incidencia (ENUM). Valor del conjunto: 'Abierto', 'Asignado', 'En Análisis', 'En Contención', 'En Remediación', 'Resuelto', 'Cerrado', 'Falso Positivo'.
  <br/>
  *** <strong>Abierto:</strong> Recién reportada, sin asignar a ningún analista.
  <br/>
  *** <strong>Asignado:</strong> Asignada a un analista SOC específico.
  <br/>
  *** <strong>En Análisis:</strong> El analista está investigando la incidencia.
  <br/>
  *** <strong>En Contención:</strong> Se está conteniendo el incidente para evitar propagación.
  <br/>
  *** <strong>En Remediación:</strong> Se está aplicando la solución definitiva.
  <br/>
  *** <strong>Resuelto:</strong> Problema solucionado, pendiente de cierre formal.
  <br/>
  *** <strong>Cerrado:</strong> Incidencia cerrada definitivamente.
  <br/>
  *** <strong>Falso Positivo:</strong> No era una incidencia real de seguridad.
  </li>
  <br/>

  <li><strong>Solicitud_Presupuesto: </strong>
  Elemento con &rarr; 
  Servicio solicitado (FK a Servicios, opcional - puede ser consulta general),
  nombre_contacto,
  email_contacto,
  telefono_contacto (opcional),
  empresa,
  nif_cif (opcional),
  num_empleados (opcional - tamaño de la empresa),
  sector_actividad (opcional - ej: Banca, Salud, Industrial),
  descripcion_necesidad,
  alcance_solicitado (opcional),
  presupuesto_estimado (opcional - presupuesto máximo del cliente),
  fecha_inicio_deseada (opcional),
  Estado de solicitud,
  prioridad (numérico: 1=Baja, 2=Media, 3=Alta, 4=Urgente),
  fecha_solicitud,
  fecha_contacto (opcional),
  Usuario asignado para seguimiento (FK a Usuarios, opcional),
  notas_comerciales,
  origen_solicitud (Web, Teléfono, Email, Referido, Evento, etc.).
  <br/>
  *** Formularios de solicitud de presupuesto desde la parte pública de la web.
  <br/>
  *** Los visitantes pueden solicitar información sobre servicios específicos o hacer consultas generales.
  <br/>
  *** Los formularios pueden ser específicos según el servicio: por ejemplo, para formación se pregunta el número de empleados a formar.
  <br/>
  *** El equipo comercial gestiona estas solicitudes, las asigna a usuarios responsables y hace seguimiento hasta cerrar la venta o descartarla.
  </li>
  <br/>
  
  <li><strong>Estado de solicitud:</strong>
  Sustituto de &rarr; estado_solicitud (ENUM). Valor del conjunto: 'Pendiente', 'En Revisión', 'Contactado', 'Presupuesto Enviado', 'Negociación', 'Contratado', 'Rechazado', 'Cancelado'.
  <br/>
  *** Flujo típico: Pendiente &rarr; En Revisión &rarr; Contactado &rarr; Presupuesto Enviado &rarr; Negociación &rarr; Contratado.
  <br/>
  *** Cuando una solicitud pasa a estado 'Contratado', se debe crear el correspondiente Proyecto relacionado.
  </li>
  <br/>

  <li><strong>Curso: </strong>
  Elemento con &rarr; nombre, descripcion,
  imagen_portada (opcional),
  nota_minima_aprobado (ej: 5.00 sobre 10),
  activo,
  Registro de usuario.
  <br/>
  *** Cápsulas de formación e-learning en ciberseguridad que la empresa asigna a sus clientes.
  <br/>
  *** Ejemplos: "Concienciación en Phishing", "Seguridad en Teletrabajo", "Protección de Datos Personales (RGPD)", "Gestión de Contraseñas Seguras".
  <br/>
  *** Modalidad autoformativa: NO tienen fechas de inicio/fin fijas, el cliente lo realiza a su ritmo cuando quiera.
  <br/>
  *** Cada curso se compone de Diapositivas (contenido explicativo) y Preguntas_Cuestionario (test final de evaluación).
  </li>
  <br/>

  <li><strong>Diapositiva: </strong>
  Elemento con &rarr; 
  Curso relacionado (FK a Cursos),
  numero_orden (1, 2, 3... determina la secuencia),
  titulo,
  contenido_html (texto explicativo en formato HTML),
  imagen_url (ruta a imagen o esquema explicativo, opcional),
  video_url (URL a video de YouTube/Vimeo/servidor propio, opcional),
  Registro de usuario.
  <br/>
  *** El contenido real del curso dividido en slides o pantallas.
  <br/>
  *** Funciona como un carrusel/presentación: el usuario ve la diapositiva 1, lee el contenido, mira las imágenes/videos, y pasa a la siguiente usando botones "Anterior/Siguiente".
  <br/>
  *** El número de orden es CRÍTICO: define la secuencia pedagógica del curso (slide 1 debe verse antes que el 2, etc.).
  <br/>
  *** Al finalizar la última diapositiva, se desbloquea el cuestionario de evaluación.
  <br/>
  *** Se puede tener la posibilidad de incluir contenido multimedia: texto + imagen + video en la misma diapositiva.
  </li>
  <br/>

  <li><strong>Pregunta_Cuestionario: </strong>
  Elemento con &rarr; 
  Curso relacionado (FK a Cursos),
  enunciado_pregunta,
  opcion_a (texto de la opción A),
  opcion_b (texto de la opción B),
  opcion_c (texto de la opción C),
  opcion_correcta (ENUM: 'a', 'b', 'c' - indica cuál es la respuesta correcta),
  Registro de usuario.
  <br/>
  *** Pequeño examen tipo test vinculado a cada curso para evaluar el aprendizaje.
  <br/>
  *** Formato simplificado: siempre 3 opciones de respuesta (A, B, C) con una única respuesta correcta.
  <br/>
  *** Se almacenan las preguntas y las opciones posibles, indicando en el campo opcion_correcta cuál es la válida para la corrección automática.
  <br/>
  *** Un curso típico tiene entre 5-10 preguntas en su batería de test.
  <br/>
  *** El sistema calcula automáticamente la nota: (respuestas_correctas / total_preguntas) * 10.
  <br/>
  *** Ejemplo de pregunta: "¿Qué es el phishing?" - A) Un tipo de virus, B) Un engaño para robar datos, C) Un protocolo de seguridad. Respuesta correcta: 'b'.
  </li>
  <br/>

  <li><strong>Progreso_Usuario: </strong>
  Elemento con &rarr; 
  Usuario (FK a Usuarios - debe ser cliente),
  Curso (FK a Cursos),
  diapositiva_actual (número de la última diapositiva vista),
  cuestionario_realizado (lógico - si ya hizo el test),
  nota_obtenida (0-10, NULL si no ha hecho el test aún),
  fecha_inicio (cuándo empezó el curso),
  fecha_fin (cuándo lo completó, NULL si aún no termina),
  Estado del progreso.
  <br/>
  *** Tabla que guarda el avance individual de cada cliente en cada curso que realice.
  <br/>
  *** Permite saber: si el cliente se ha leído todas las diapositivas, en qué slide está actualmente, si ya ha superado el test, qué nota obtuvo.
  <br/>
  *** Un usuario solo puede tener UN registro de progreso activo por curso (restricción UNIQUE en usuario_id + curso_id).
  <br/>
  *** Flujo típico: 1) Cliente empieza curso → se crea registro con estado='En curso' y diapositiva_actual=1. 2) Cliente navega → se actualiza diapositiva_actual. 3) Cliente termina diapositivas → puede hacer cuestionario. 4) Cliente hace test → cuestionario_realizado=1, se calcula nota_obtenida. 5) Sistema compara con nota_minima_aprobado → si supera: estado='Aprobado', si no: estado='Suspenso'.
  <br/>
  *** El cliente puede reintentar el test si suspende (permite volver a hacer el cuestionario).
  </li>
  <br/>

  <li><strong>Estado del progreso:</strong>
  Sustituto de &rarr; estado (ENUM). Valor del conjunto: 'En curso', 'Aprobado', 'Suspenso'.
  <br/>
  *** <strong>En curso:</strong> El cliente aún está viendo las diapositivas o no ha hecho el test.
  <br/>
  *** <strong>Aprobado:</strong> Completó el curso y superó el cuestionario (nota >= nota_minima_aprobado).
  <br/>
  *** <strong>Suspenso:</strong> Completó el curso pero no superó el cuestionario (puede reintentar).
  </li>
  <br/>

  <li><strong>Registro de usuario:</strong>
  Sustituto de &rarr; 
  creado_por (FK a Usuarios, puede ser NULL), 
  fecha_creacion (timestamp automático), 
  modificado_por (FK a Usuarios, opcional, puede ser NULL), 
  fecha_modificacion (timestamp automático opcional).
  <br/>
  *** Campos de auditoría que se incluyen en las tablas: Servicios, Proyectos y Eventos_Calendario.
  <br/>
  *** Sirven para rastrear quién creó y quién modificó por última vez cada registro, junto con las fechas correspondientes.
  <br/>
  *** Importante para trazabilidad y auditoría de cambios, especialmente relevante en una plataforma de ciberseguridad.
  </li>
  <br/>

</ul>
</div>

<hr/>
<div class="titulo titulo3" style="margin:5mm;font-size:1.0em;font-weight:bold">Relaciones entre Entidades:</div>
<div style="text-align:justify;margin:0em">
<ul>
  <li><strong>Usuarios ↔ Proyectos:</strong>
    <ul type="disc">
      <li>Un Usuario (rol=cliente) puede tener múltiples Proyectos como cliente.</li>
      <li>Un Usuario (rol=consultor) puede tener múltiples Proyectos asignados como consultor.</li>
      <li>Un Usuario (rol=auditor) puede tener múltiples Proyectos asignados como auditor.</li>
      <li>Un Proyecto pertenece a un único Cliente, y opcionalmente tiene asignado un Consultor y/o un Auditor.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Servicios ↔ Proyectos:</strong>
    <ul type="disc">
      <li>Un Servicio puede estar contratado en múltiples Proyectos.</li>
      <li>Un Proyecto está basado en un único Servicio.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Proyectos ↔ Documentos:</strong>
    <ul type="disc">
      <li>Un Proyecto puede tener múltiples Documentos asociados (políticas, informes, certificados).</li>
      <li>Un Documento pertenece a un único Proyecto.</li>
      <li>Relación en cascada: si se elimina un Proyecto, se eliminan todos sus Documentos.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Proyectos ↔ Eventos_Calendario:</strong>
    <ul type="disc">
      <li>Un Proyecto puede tener múltiples Eventos programados (auditorías, reuniones).</li>
      <li>Un Evento está relacionado con un único Proyecto.</li>
      <li>Relación en cascada: si se elimina un Proyecto, se eliminan todos sus Eventos.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Usuarios ↔ Incidencias:</strong>
    <ul type="disc">
      <li>Un Usuario (rol=cliente) puede reportar múltiples Incidencias.</li>
      <li>Un Usuario (rol=analista_soc) puede tener múltiples Incidencias asignadas.</li>
      <li>Una Incidencia es reportada por un único Cliente y puede estar asignada a un único Analista SOC.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Servicios ↔ Solicitudes_Presupuesto:</strong>
    <ul type="disc">
      <li>Un Servicio puede tener múltiples Solicitudes de presupuesto.</li>
      <li>Una Solicitud puede estar relacionada con un Servicio específico o ser una consulta general (NULL).</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Cursos ↔ Diapositivas:</strong>
    <ul type="disc">
      <li>Un Curso se compone de múltiples Diapositivas ordenadas secuencialmente (por numero_orden).</li>
      <li>Una Diapositiva pertenece a un único Curso.</li>
      <li>Relación en cascada: si se elimina un Curso, se eliminan todas sus Diapositivas.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Cursos ↔ Preguntas_Cuestionario:</strong>
    <ul type="disc">
      <li>Un Curso tiene un conjunto de Preguntas (batería de test) asociadas.</li>
      <li>Una Pregunta pertenece a un único Curso.</li>
      <li>Relación en cascada: si se elimina un Curso, se eliminan todas sus Preguntas.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Usuarios ↔ Progreso_Usuario ↔ Cursos:</strong>
    <ul type="disc">
      <li>Un Usuario (Cliente) puede tener múltiples registros de Progreso (uno por cada curso que realice).</li>
      <li>Un Curso puede tener múltiples registros de Progreso (uno por cada cliente que lo esté realizando).</li>
      <li>Un registro de Progreso_Usuario vincula UN usuario con UN curso de forma única (tabla de relación N:M con datos adicionales).</li>
      <li>En esta tabla se guarda: qué diapositiva está viendo, si hizo el test, qué nota obtuvo, si aprobó o suspendió.</li>
      <li>Restricción: Un usuario solo puede tener UN progreso activo por curso (índice UNIQUE en usuario_id + curso_id).</li>
    </ul>
  </li>
</ul>
</div>

<hr/>
<div class="titulo titulo3" style="margin:5mm;font-size:1.0em;font-weight:bold">Notas Técnicas para el Desarrollo:</div>
<div style="text-align:justify;margin:0em">
<ul>
  <li><strong>Framework:</strong> Yii2 Framework con soporte integrado para RBAC (Role-Based Access Control).
  </li>
  <br/>
  
  <li><strong>Seguridad:</strong> Dado que es una plataforma de ciberseguridad, se debe implementar:
    <ul>
      <li>Contraseñas: Hash usando password_hash() de PHP con PASSWORD_BCRYPT o PASSWORD_ARGON2ID. Mínimo 8 caracteres con mayúsculas, minúsculas, números y símbolos.</li>
      <li>Protección CSRF: Tokens en todos los formularios (Yii2 lo hace automáticamente).</li>
      <li>Validación: Sanitizar y validar todas las entradas de usuario.</li>
      <li>Sesiones: Timeout automático de sesión después de inactividad.</li>
      <li>Control de intentos de login: Bloquear cuenta después de N intentos fallidos (usar campo intentos_acceso).</li>
      <li>HTTPS: Toda la comunicación debe ser por HTTPS obligatoriamente.</li>
      <li>Integridad de archivos: Calcular hash SHA-256 al subir documentos (campo hash_verificacion).</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Subida de Archivos:</strong>
    <ul>
      <li>Utilizar la clase UploadedFile de Yii2.</li>
      <li>Validar tipos de archivo permitidos (solo PDF, DOCX para documentos).</li>
      <li>Limitar tamaño máximo de archivo (ej: 10 MB).</li>
      <li>Almacenar fuera del webroot o con nombres aleatorios para evitar acceso directo.</li>
      <li>Implementar control de acceso: solo el cliente propietario puede descargar sus documentos.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Calendario:</strong>
    <ul>
      <li>Usar extensión yii2-fullcalendar para visualización de eventos.</li>
      <li>Implementar permisos diferenciados: Auditores pueden crear/editar eventos, Consultores y Clientes solo lectura.</li>
      <li>Sistema de recordatorios: Enviar emails X días antes de cada evento (campo recordatorio_enviado).</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Sistema de Ticketing (Incidencias):</strong>
    <ul>
      <li>Implementar notificaciones en tiempo real cuando se reporta una nueva incidencia.</li>
      <li>Panel SOC con filtros por severidad, estado, cliente.</li>
      <li>Cálculo automático de tiempo_resolucion y validación de SLA según severidad.</li>
      <li>Dashboard con métricas: incidencias abiertas, tiempo promedio de resolución, cumplimiento de SLA.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>RBAC (Control de Acceso):</strong>
    <ul>
      <li>Configurar roles en Yii2 RBAC: invitado, cliente, consultor, auditor, analista_soc, admin.</li>
      <li>Permisos por controlador/acción según rol.</li>
      <li>Ejemplo: Solo clientes pueden acceder a ProyectoController::actionMisDocumentos.</li>
      <li>Ejemplo: Solo analistas_soc pueden acceder a IncidenciaController::actionAsignar.</li>
      <li>Ejemplo: Solo auditores pueden modificar eventos del calendario.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Base de Datos:</strong>
    <ul>
      <li>Motor: MySQL 5.7+ o MariaDB 10.2+</li>
      <li>Charset: utf8mb4 para soporte completo de caracteres Unicode (incluyendo emojis).</li>
      <li>Claves foráneas: Activadas con políticas apropiadas (RESTRICT, CASCADE, SET NULL).</li>
      <li>Índices: Creados en campos de búsqueda frecuente para mejorar rendimiento.</li>
      <li>Backups: Implementar sistema de backups automáticos diarios.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Módulo de Formación E-learning:</strong>
    <ul>
      <li><strong>Creación de Cursos:</strong> Panel de administración para crear cursos, añadir diapositivas con editor WYSIWYG, y crear preguntas tipo test.</li>
      <li><strong>Visualización (Cliente):</strong> Interfaz de carrusel/slider para navegar por las diapositivas. Botones "Anterior/Siguiente". Indicador de progreso visual (ej: "Diapositiva 3 de 8").</li>
      <li><strong>Contenido Multimedia:</strong> Soporte para imágenes (subida local), videos (embed de YouTube/Vimeo o subida directa), y texto formateado (HTML/Markdown).</li>
      <li><strong>Control de Secuencia:</strong> El usuario NO puede saltar diapositivas (debe verlas en orden). El cuestionario solo se habilita al completar la última diapositiva.</li>
      <li><strong>Cuestionario Interactivo:</strong> Presentar preguntas una a una o todas juntas. Corrección automática al enviar. Mostrar resultado inmediato (Aprobado/Suspenso) con opción de reintentar.</li>
      <li><strong>Seguimiento:</strong> Dashboard del cliente mostrando: cursos disponibles, cursos en progreso, cursos completados, notas obtenidas. Panel de administración con estadísticas: tasa de aprobación, tiempo promedio de completado, diapositiva donde más abandonan.</li>
      <li><strong>Gamificación (opcional):</strong> Certificados descargables al aprobar. Badges o insignias por logros. Ranking de usuarios (si se desea fomentar competencia sana).</li>
      <li><strong>Tecnología Recomendada:</strong> Frontend: Swiper.js o Slick.js para carrusel de diapositivas. Backend: Yii2 con modelos para cursos, diapositivas, preguntas y progreso. Almacenamiento: Videos preferiblemente en YouTube/Vimeo (ahorra ancho de banda) o servidor de streaming si es necesario.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Interfaz de Usuario:</strong>
    <ul>
      <li>Panel Admin: Usar AdminLTE o similar para interfaz administrativa.</li>
      <li>Responsive: Diseño adaptable a móviles (Bootstrap).</li>
      <li>Dashboard por rol: Cada tipo de usuario ve un dashboard diferente al iniciar sesión.</li>
      <li>Notificaciones: Sistema de alertas visuales para eventos importantes.</li>
    </ul>
  </li>
</ul>
</div>

<hr/>
<div class="titulo titulo3" style="margin:5mm;font-size:1.0em;font-weight:bold">Estructura de la Aplicación (Módulos Principales):</div>
<div style="text-align:justify;margin:0em">
<ul>
  <li><strong>Área Pública (Frontend - Sin autenticación):</strong>
    <ul>
      <li>Página principal con información corporativa.</li>
      <li>Catálogo de Servicios: Páginas informativas divididas en tres categorías (Gobernanza, Defensa, Auditoría).</li>
      <li>Formularios de Solicitud de Presupuesto: Específicos según el servicio.</li>
      <li>Página de contacto.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Portal Cliente (Frontend - Autenticación rol=cliente):</strong>
    <ul>
      <li>Mis Proyectos: Listado de proyectos contratados.</li>
      <li>Repositorio Documental: Descarga de políticas, procedimientos e informes de sus proyectos.</li>
      <li>Calendario de Auditorías: Visualización de fechas programadas.</li>
      <li>Buzón SOC: Formulario urgente para reportar incidencias de seguridad.</li>
      <li>Mis Incidencias: Seguimiento del estado de incidencias reportadas.</li>
      <li>Mis Cursos: Acceso a cursos de formación asignados. Ver progreso actual. Continuar cursos en progreso. Realizar cuestionarios. Descargar certificados de cursos aprobados.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Panel Consultor (Backend - Autenticación rol=consultor):</strong>
    <ul>
      <li>Mis Proyectos Asignados: Gestión de proyectos de implantación de normativas.</li>
      <li>Gestión Documental: Subida de archivos (políticas, procedimientos) para clientes.</li>
      <li>Calendario (solo lectura): Consulta de fechas de auditoría para coordinarse.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Panel Auditor (Backend - Autenticación rol=auditor):</strong>
    <ul>
      <li>Mis Proyectos de Auditoría: Gestión de proyectos asignados.</li>
      <li>Gestión del Calendario: Crear, modificar y eliminar eventos de auditoría (permisos de escritura).</li>
      <li>Subida de Informes: Subir informes de resultados de auditorías.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Panel Analista SOC (Backend - Autenticación rol=analista_soc):</strong>
    <ul>
      <li>Ticketing SOC: Listado completo de incidencias con filtros.</li>
      <li>Asignación de Incidencias: Asignar tickets a sí mismo o a otros analistas.</li>
      <li>Gestión de Estados: Cambiar estado de incidencias (Abierto → En Análisis → Resuelto → Cerrado).</li>
      <li>Dashboard SOC: Métricas de incidencias, SLA, tiempos de respuesta.</li>
    </ul>
  </li>
  <br/>
  
  <li><strong>Panel Administrador (Backend - Autenticación rol=admin):</strong>
    <ul>
      <li>Gestión de Usuarios: CRUD completo de usuarios, asignación de roles.</li>
      <li>Gestión de Servicios: CRUD del catálogo de servicios.</li>
      <li>Gestión de Proyectos: Visibilidad global, creación y asignación.</li>
      <li>Gestión de Solicitudes de Presupuesto: Revisión y asignación.</li>
      <li>Gestión de Cursos: CRUD completo de cursos de formación. Creación y edición de diapositivas (con editor WYSIWYG). Gestión de preguntas de cuestionarios. Asignación de cursos a clientes/proyectos. Estadísticas de completado y aprobación.</li>
      <li>Reportes y Estadísticas: Informes de ventas, proyectos activos, incidencias, progreso de formación.</li>
      <li>Configuración del Sistema.</li>
    </ul>
  </li>
</ul>
</div>
  
</div>

</body>
</html>